分割广播域的方法：使用路由器可以隔离广播域。

将局域网内的设备划分成与物理位置无关的逻辑组的技术，这些逻辑组具有某些共同的需求。

### 802.1Q帧

**概念**：对以太网的MAC格式进行了扩展，插入了4字节的VLAN标记。

VLAN标记的最后12比特称为VLAN标识符VID，它唯一标志了以太网帧属于哪一个VLAN

- **VID的取值范围**是0~4095
- 0和4095都不用来表示VLAN，所以VID的有效取值范围是1~4094

802.1Q帧是由交换机来处理的，而不是用户主机处理

- 当交换机收到普通的以太网帧时，会将其插入4字节的VLAN标记转变为802.1Q帧，简称“打标签”
- 当交换机转发802.1Q帧时，可能会删除4字节VLAN标记转变为普通以太网帧，简称“去标签”

![image-20200611230041461](虚拟局域网VLAN.assets/image-20200611230041461.png)

### 交换机端口类型

#### Access

- 一般用于连接用户计算机
- 只能属于一个VLAN
- PVID值与端口所属VLAN的ID相同（默认为1）

**发送处理方法**：

若帧中的VID与端口的PVID相等，则“去标签”并转发该帧，否则不转发。

**接收处理方法**：

一般只接收“未打标签”的普通以太网MAC帧。根据接收帧的端口的PVID给帧“打标签”，即插入四字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等

#### Trunk

- 一般用于交换机之间或交换机与路由器之间的互连
- 可以属于多个VLAN
- 用户可以设置Trunk端口的PVID值。默认情况下，Trunk端口的PVID值为1

**Trunk端口发送处理方法**：

- 对VID等于PVID的帧，“去标签”再转发
- 对VID不等于PVID的帧，直接转发

**Trunk端口的接收处理方法**：

- 接收未打标签的帧，根据接收帧的端口的PVID给帧“打标签”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID	取值相等
- 接收“已打标签的帧”

#### Hybird

1. Hybird端口即可用于交换机之间或交换机与路由器之间（Trunk端口），也可用于交换机与用户之间（Access端口）
2. Hybird端口可以属于多个VLAN（同Trunk端口）
3. 用户可以设置Hybird端口的PVID值。默认情况下Hybird端口的PVID值为1（同Trunk端口）

**Hybird端口发送处理方法（与Trunk不同）**：

查看帧的VID是否在端口的"去标签"列表中

- 若存在，则“去标签”后再转发
- 若不存在，则直接转发

**Hybird端口接收处理方法：（同Trunk端口）：**

- 接收未打标签的帧，根据接收帧的端口的PVID给帧“打标签”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID	取值相等
- 接收“已打标签的帧”