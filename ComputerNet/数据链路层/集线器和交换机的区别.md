## 集线器

- 使用集线器的以太网在逻辑上仍是一个总线网，各站共享总线资源，使用的还是CSMA/CD协议。集线器互连起来的所有主机共享总线带宽，属于同一个碰撞域和广播域。
- **集线器只工作在物理层**，它的每个接口仅简单的转发比特，不进行碰撞检测
- 集线器一般都有少量的容错能力和网络管理能力
- 使用**集线器在物理层**扩展以太网

## 以太网交换机

- 以太网交换机通常有多个接口。每个接口都可直接与一台主机或另一个以太网交换机相连。一般都工作在全双工方式.
- 以太网交换机具有并行性，能同时联通多对接口，使多对主机能同时通信，无碰撞（不适用CSMA/CD协议）
- 以太网交换机一般都具有多种速率的接口。
- **以太网交换机工作在数据链路层（也包括物理层）**，它收到帧后，在帧交换表中查找帧的目的MAC地址对应的接口号，然后通过该接口转发帧。
- 以太网交换机是一种即插即用设备，其内部帧交换表是通过自学习算法自动地逐渐建立起来的。

帧的两种转发方式：

- **存储转发**
- **直通交换**：采用基于硬件的交叉矩阵（交换时延非常小，但不检查帧是否有差错）

## 区别

对于单播帧：

- 集线器是把帧发送到每一个主机，然后根据帧交换表来确定哪一个主机接收帧
- 交换机是直接把帧发送到目的主机

对于广播帧：

两种方式从效果上没有什么区别

集线器即扩大了广播域，也扩大了碰撞域。

交换机只扩大了广播域，隔离了碰撞域。

## 以太网交换机自学习和转发帧的流程

湖科大老师的视频，必须安利一波，讲的太好啦！https://www.bilibili.com/video/BV1c4411d7jb?p=37

![image-20200606143837761](集线器和交换机的区别.assets/image-20200606143837761.png)

![image-20200606144352510](集线器和交换机的区别.assets/image-20200606144352510.png)

## 以太网交换机生成树协议STP

可以在增加冗余链路来提高网络可靠性的同时又避免网络环路带来的各种问题。

但是，冗余链路也会带来负面效应——形成网络环路

网络环路会带来以下问题：

- 广播风暴：大量消耗网络资源，使得网络无法正常转发其他数据帧。
- 主机收到重复的广播帧：大量消耗主机资源
- 交换机的帧交换表震荡（飘移）

生成树协议：Spanning Tree Protocol

- 不论交换机之间采用怎样的物理连接，交换机都能够自动计算并构建一个逻辑上没有环路的网络，其逻辑拓扑结构必须是树形的（无逻辑环路）
- 最终生成的树形逻辑拓扑要确保联通整个网络
- 当首次连接交换机或网络物理拓扑发生变化时，交换机都将进行生成树的重新计算