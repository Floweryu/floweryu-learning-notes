## 虚拟专用网VPN

- 利用公用的因特网作为本机构专用网之间的通信载体，专用网成为虚拟专用网
- 虚拟专用网中的各主机所分配的地址应该是本机构可自由分配的专用地址，不需要申请。
- 私有地址只能用作本地地址，而不能用作全球地址。因特网中的所有路由器，对目的地址是私有地址的IP数据报一律不进行转发。



![image-20200607164300222](虚拟专用网VPN和网络地址转换NAT.assets/image-20200607164300222.png)

### 内联网VPN

同一机构内不同部门的内部网络所构成的虚拟专用网VPN又称为内联网VPN

### 外联网VPN

一个机构的VPN需要有某些外部机构参加进来，这样的VPN称为外联网VPN

### 远程接入VPN

在外地工作的员工需要访问公司内部的专用网络时，只需要在任何地点接入到因特网，运行驻留在员工PC中的VPN软件，在员工的PC和公司的主机之间建立VPN隧道，即可访问专用网络中的资源。

## 网络地址转换NAT

NAT能使大量使用内部专用地址的专用网络用户共享少量外部全球地址来访问因特网上的主机和资源。

- 将私有地址转换成全球IP地址，然后再发送到互联网上
- 使用私有地址的主机不能充当因特网服务器
- 如果NAT路由器具有N个全球IP地址，那么至多只能有N个内网主机能够同时和因特网上的主机通信
- NAT对外网屏蔽了内网主机的网络地址，能为内网主机提供一定的安全保护

![image-20200607165247046](虚拟专用网VPN和网络地址转换NAT.assets/image-20200607165247046.png)

![image-20200607165352870](虚拟专用网VPN和网络地址转换NAT.assets/image-20200607165352870.png)

![image-20200607170258861](虚拟专用网VPN和网络地址转换NAT.assets/image-20200607170258861.png)

### NAPT

由于绝大多数的网络应用都是使用运输层协议TCP或UDP来传送数据，因此可以**利用运输层的端口号和IP地址一起进行转换**。

这样，用一个全球IP地址就可以使多个拥有本地地址的主机同时和因特网上的主机进行通信。这种将端口号和IP地址一起进行转换的技术叫做$\color{red}{网络地址与端口号转换NAPT}$(Network Address and Port Translation)

![image-20200607170103878](虚拟专用网VPN和网络地址转换NAT.assets/image-20200607170103878.png)