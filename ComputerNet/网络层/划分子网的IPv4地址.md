## 子网掩码

- 32比特的子网掩码可以表明分类IP地址的$\color{red}{主机号部分}$被借用了几个比特作为子网号  （**即子网掩码中主机号部分1比特的个数为子网号占用比特个数**）
- 使用连续的比特1来对应网络号和子网号
- 使用连续的比特0来对应主机号
- 将划分子网的$\color{red}{IPv4地址}$与$\color{red}{子网掩码}$进行$\color{red}{逻辑与运算}$就可得到该IPv4地址$\color{red}{所在子网的网络地址}$
- 将划分子网的$\color{red}{IPv4地址}$与$\color{red}{子网掩码取反}$进行$\color{red}{逻辑与运算}$就可得到该IPv4地址$\color{red}{所在子网的主机号地址}$

![image-20200606200053810](划分子网的IPv4地址.assets/image-20200606200053810.png)

### 子网划分题目

![image-20200606200815824](划分子网的IPv4地址.assets/image-20200606200815824.png)

![image-20200606203030155](划分子网的IPv4地址.assets/image-20200606203030155.png)

## 默认子网掩码

默认子网掩码是指在未划分子网的情况下使用的子网掩码。

网络号部分都为1，主机号部分都为0；表示该类网络的默认子网掩码

## 无分类编址的IPv4地址

- CIDR使用**斜线记法**，在IPv4地址后面加上"/"，在$\color{red}{斜线后面写上网络前缀所占的比特数量}$。
![image-20200606204558175](划分子网的IPv4地址.assets/image-20200606204558175.png)

- CIDR将网络前缀都相同的连续的IP地址组成一个“CIDR地址块”。
![image-20200606205000080](划分子网的IPv4地址.assets/image-20200606205000080.png)

- 地址数量就是（$2^{主机比特数}$）个，主机部分全为0是最小地址（网络地址），全为1是最大地址（广播地址），这两个地址不能作为主机地址
- 聚合C类网的数量 = 地址数量 / 2^8（2^8就是C类网的主机号数量）
- 地址掩码：网络前缀全为1，主机号全为0

### 路由聚合（构造超网）

寻找同一个路由下相同部分的网络前缀，然后把后面的全部记为0，采用无分类编址的方法记录

![image-20200606205746241](划分子网的IPv4地址.assets/image-20200606205746241.png)

- 网络前缀越长，地址块越小，路由越具体
- 若路由器转发分组时有多条路可选，则选择网络前缀最长的那条，称为$\color{red}{最长前缀匹配}$，因为这样的路由更具体

## IPv4地址应用规划

视频讲解，非常清楚：https://www.bilibili.com/video/BV1c4411d7jb?p=47

### 定长的子网掩码FLSM

从网络个数分配，选取最小的子网个数，定长掩码。

- 使用同一个子网掩码来划分子网
- 每个子网所分配的IP地址数量相同，造成IP地址浪费

### 变长的子网掩码VLSM

从主机号开始分配，选取最小的主机号位数，变长掩码。

- 使用不同的子网掩码来划分子网
- 每个子网所分配的IP地址数量可以不同，尽可能减少对IP地址的浪费