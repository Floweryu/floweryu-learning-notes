> HTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer 超文本传输安全协议）

`HTTPS`在传统的`HTTP`和`TCP`之间加了一层用于加密解密的`SSL/TLS`层（安全套接层`Secure Sockets Layer` / 安全传输层`Transport Layer Security`）层。使用HTTPS必须要有一套自己的数字证书（包含公钥和私钥）

HTTPS解决的问题:

 - **信息加密传输**：第三方无法窃听；
 - **校验机制**：一旦被篡改，通信双方会立刻发现；
 - **身份证书**：防止身份被冒充。

HTTPS加密过程：

 1. 客户端请求服务器获取**证书公钥**
 2. 客户端(SSL/TLS)**解析证书**（无效会弹出警告）
 3. 生成随机值
 4. 用**公钥加密**随机值**生成密钥**
 5. 客户端将**密钥**发送给服务器
 6. 服务端用**私钥**解密**密钥**得到随机值
 7. 将**信息和随机值**混合在一起进行对称加密
 8. 将**加密的内容**发送给客户端
 9. 客户端用**密钥**解密信息

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201129201334528.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzIwNzAyNQ==,size_16,color_FFFFFF,t_70)

加密过程使用了对称加密和非对称加密。

- 对称加密: **客户端和服务端采用相同的密钥经行加密**

>    encrypt(明文，秘钥) = 密文
    decrypt(密文，秘钥) = 明文

- 非对称加密：**客户端通过公钥加密。服务端通过私钥解密**

>  encrypt(明文，公钥) = 密文
    decrypt(密文，私钥) = 明文

因为TLS握手的过程中采用了非对称加密，客户端本身不知道服务器的秘钥，这样通信就不会被中间人劫持。此外这一步服务端还提供了证书，并且可能要求客户端提供证书。关于证书下文会提到，只要有了证书，就能保证和你通信的对方是真实的，而不是别人伪造的。

 1. 客户端获取到了站点证书，拿到了站点的公钥
 2. 客户端找到其站点证书颁发者的信息
 3. **站点证书的颁发者**验证**服务端站点**是否可信
 4. 往上回溯，找到**根证书颁发者**
 5. 通过**根证书颁发者**一步步**验证站点证书颁布者**是否可信


另外：

 - HTTPS默认使用443端口，而HTTP默认使用80端口。
 - TLS就是从SSL发展而来的，只是SSL发展到3.0版本后改成了TLS
 - 第一次请求中TLS握手的代价很大
 - 后续的请求会共用第一次请求的协商结果

